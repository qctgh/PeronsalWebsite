@model HomeIndexModel

<div class="contar-wrap">
    <h4 class="item-title">
        <p><i class="layui-icon layui-icon-speaker"></i>公告：<span>欢迎来到我的个人博客</span></p>
    </h4>
    @foreach (var item in Model.Articles)
    {
        <div class="item">
            <div class="item-box  layer-photos-demo1 layer-photos-demo">
                <h3>
                    <a href="~/Article/Detail">@item.Title</a>
                </h3>
                <h5>发布于：<span>@item.CreateDateTime</span></h5>
                <p>@item.Content</p>
                <img src="../res/static/images/item.png" alt="">
            </div>
            <div class="comment count">
                <a href="details.html#comment">评论</a>
                <a href="javascript:;" class="like">点赞</a>
            </div>
        </div>
    }
</div>
<div class="item-btn">
    <button class="layui-btn layui-btn-normal">下一页</button>
</div>

@section scripts{
    <script>
        layui.use(['flow'], function () {
            var flow = layui.flow;

            flow.load({
                elem: '#LAY_demo2' //流加载容器
                , isAuto: false
                , isLazyimg: true
                , done: function (page, next) { //加载下一页
                    //模拟插入
                    setTimeout(function () {
                        var lis = [];
                        for (var i = 0; i < 6; i++) {
                            lis.push('<li><img lay-src="//s17.mogucdn.com/p2/161011/upload_279h87jbc9l0hkl54djjjh42dc7i1_800x480.jpg?v=' + ((page - 1) * 6 + i + 1) + '"></li>')
                        }
                        next(lis.join(''), page < 6); //假设总页数为 6
                    }, 500);

                    $.post("/Article/AddData", { "id": channelId, "pageIndex": ++pageIndex }, function (data) {
                        $("#rowArts").append(data);
                        flag = true;//可以继续加载数据
                    });
                }
            });

        });
    </script>
    <script type="text/javascript">
        var pageIndex = 1;
        var flag = true;
        var pageCount =@ViewBag.PageCount +"";
            layui.use('jquery', function () {
                var jquery = layui.jquery;
                var $ = layui.$;
                $(".laypage-next").click(function () {
                    $.post("/Article/AddData", { "pageIndex": ++pageIndex }, function (data) {
                        $("#rowArts").append(data);
                        flag = true;//可以继续加载数据
                    });
                });
            });

    </script>
}